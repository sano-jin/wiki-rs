{"path":"top","name":"top","markdown":"# Welcome to Wiki.rs! { #8fce35b2-4059-4dd3-91b9-993c4d1a6b0c }\n\nA simple wiki created with Rust from scratch.\n\n![alt text](wiki-rs-demo.png)\n\n# 特徴 { #e22558e9-b2d2-40b3-9b1f-ed6c702eee97 }\n\n- レスポンシブ対応\n- ダークモード対応\n- 数式対応（`\\(\\)` で inline equation, `\\[\\]` で block）\n- ソースコードのシンタックスハイライトが可能\n- ソースコードのコピーができるボタンあり\n- データベース不要で，rust 環境さえあればすぐに導入可能\n  （DB は後から導入するかも知れない．要検討）\n- コメントアウト対応（`//` でコメントアウトする）\n\nこれから対応予定のもの\n\n- ユーザごとのプライベートなページ\n- github, youtube などの外部サイトとの連携\n  - ソースコードや動画の埋め込み表示\n\n# Development { #3f056b8c-6608-42e2-b4b9-0e62a525d674 }\n\n## Prerequisties { #0f4dda9f-a1ed-435f-9ae3-bec219b72a33 }\n\nInstall Cargo\n\n## Run { #a136c2e2-abfc-4278-b5b2-568ed4c80468 }\n\n1. サンプルの public directory が docs 以下にあるので，それを持ってくる．\n\n   ```sh\n   cp -r docs/public .\n   ```\n\n2. cargo で backend を実行する\n\n   ```sh\n   cargo run\n   ```\n\n3. and access <https://127.0.0.1:8443/> on your browser.\n\n# Design { #4794fc2a-b860-439d-9f88-37454120e90c }\n\nとりあえずの architecture:\n\n- model\n  - page の型宣言をしておく\n  - markdown から page に変換したりするコードを置いておく\n- interface adapters :: controllers, presenters, gateways\n  - ページの更新や取得などを行うコードを書いておく\n- frameworks and drivers :: web, ui, external interfaces, devices, db\n\nclean architecture:\n\n- Enterprise business rules :: entities\n  - page の型宣言をしておく\n- application business rules :: use cases, interactor\n  - markdown から page に変換したりするコードを置いておく\n- interface adapters :: controllers, presenters, gateways\n  - ページの更新や取得などを行うコードを書いておく\n- frameworks and drivers :: web, ui, external interfaces, devices, db\n\n# API design { #f260d1e2-71d0-483b-b307-0915a955a052 }\n\n## Front { #e830c87c-2485-4ab4-9874-3d35c5f58d39 }\n\n- 普通にアクセスして見る．\n- 今見ているページの markdown を編集して，それでページを更新する．\n  - edit button\n- 新しいページの markdown を編集して，それでページを更新する．\n  - create button\n\n## Backend API { #48b97674-6a4a-457d-949d-93b9d66abb7a }\n\n- GET `/page?path=<Path to the page>`\n  - `<Path to the page>` にある html ページを返す\n  - サーバ上のファイルから読み込む\n- GET `/edit?path=<Path to the page>`\n  - 編集用の markdown を返す\n  - サーバ上のファイルから読み込む\n- POST `/edit {path:\"<Path to the page>\", body: \"<The updated markdown>\"}`\n  - markdown を投げ，それで `<Path to the page>` を更新する\n  - そのページがもともと存在しない場合は新しく作る．\n  - サーバ上のファイルに書き出しておく\n- DELETE `/edit?path=<Path to the page>`\n  - `<Path to the page>` を消去する\n  - サーバ上のファイルは消去する\n\n## 構成 { #9d1422bc-30e9-4b43-a467-5bbd4d58fad5 }\n\n### client-side { #ea5848c0-d67b-4f5d-8da5-d862644d68cf }\n\n```sh\npublic/\n├── assets/ # some assets files\n│   ├── dracula.css\n│   └── main.css\n├── edit/ # directory to save markdown files\n├── index.html # the root index.html file\n├── layouts/ # some template html files\n│   ├── edit.html\n│   └── page.html\n└── pages/ # directory to save the transformed html files\n```\n\n現在，\n`public/pages/*`, `public/edit/*` は廃止して，\n`public/db/*` に json ファイルを置くことにしている．\n\n- TODO: 後で上記のファイル構成の方にも反映する．\n\n### server-side { #9b4eab84-8972-4ead-b74a-ccf95642c257 }\n\nclean architecture を参考にしようともがいている\n（けどそもそも理解できていない）．\n\n- （けどそもそも理解できていない．．．\n\n参考資料：\n\n- https://qiita.com/nrslib/items/a5f902c4defc83bd46b8#%E7%9F%A2%E5%8D%B0%E3%81%AE%E6%96%B9%E5%90%91\n- https://nrslib.com/clean-architecture-with-java/#outline__6_3\n- https://gist.github.com/mpppk/609d592f25cab9312654b39f1b357c60\n- https://nrslib.com/clean-architecture-with-java/#outline__6_3\n\n```sh\nsrc\n├── controllers/ # client と通信する POST API\n│   ├── handle_page.rs\n│   ├── index.rs\n│   └── mod.rs\n├── entities/ # markdown to html converter などの補助関数とか\n│   ├── mod.rs\n│   └── pages.rs\n├── gateways # データベースもどき\n│   ├── mod.rs\n│   └── pages.rs\n├── lib.rs\n├── main.rs\n├── routes.rs\n├── usecases # ページのデータ構造の定義とか\n│   ├── mod.rs\n│   └── pages.rs\n└── util.rs\n```\n\n## TODOs { #3c3a0b72-76b9-404d-8a99-810d3e6bcff4 }\n\n- [ ] clean architecture などをもとにアーキテクチャを再考する．\n- [ ] issue に挙げたものの解決\n\n\n# Site structure { #53efbdf4-d9f5-4760-a67e-5b3e0ba20fb3 }\n\n{{ INDEX_UL }}","html":"<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n\n    <!-- google font -->\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin />\n    <link\n      href=\"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;700&family=JetBrains+Mono:wght@300;700&family=Noto+Sans+JP:wght@300;700&display=swap\"\n      rel=\"stylesheet\"\n    />\n\n    <!-- highlight.js -->\n    <link rel=\"stylesheet\" href=\"/files/assets/dracula.css\" />\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js\"></script>\n    <script>\n      hljs.highlightAll();\n    </script>\n\n    <!-- mathjax -->\n    <script src=\"https://polyfill.io/v3/polyfill.min.js?features=es6\"></script>\n    <script\n      type=\"text/javascript\"\n      id=\"MathJax-script\"\n      async\n      src=\"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js\"\n    ></script>\n\n    <!-- custom css -->\n    <link rel=\"stylesheet\" href=\"/files/assets/main.css\" />\n\n    <title>HOME</title>\n  </head>\n  <body>\n    <div class=\"wrapper page-wrapper\">\n      <div class=\"wrapper\">\n        <div class=\"site-header\">\n          <div class=\"site-title\">top</div>\n        </div>\n      </div>\n\n      <!-- header menu bar -->\n      <div class=\"wrapper header-menu\">\n        <a href=\"/edit?path=top\" class=\"button\">Update</a>\n        <form\n          action=\"/attach?path=top\"\n          method=\"post\"\n          enctype=\"multipart/form-data\"\n          class=\"form-hided\"\n        >\n          <label class=\"button\">\n            Attach\n            <input\n              id=\"btn-select-attach\"\n              type=\"file\"\n              multiple\n              name=\"file\"\n              class=\"input-hided\"\n            />\n          </label>\n        </form>\n        <a href=\"/users\" class=\"button\">Users</a>\n      </div>\n\n      <!-- side menu bar -->\n      <div class=\"main-body\">\n        <div class=\"sidebar\">{{ SIDE_MENU }}</div>\n\n        <!-- body contents -->\n        <div class=\"body-contents\">\n          <div class=\"wrapper\">\n            <div class=\"updated-date\">Last modified: 2022-05-15 17:43:23</div>\n            <div class=\"form-element\">\n              Create a new page:\n              <form action=\"/edit\" method=\"GET\">\n                <input\n                  type=\"text\"\n                  id=\"input_path\"\n                  name=\"input_path\"\n                  size=\"50\"\n                  value=\"\"\n                  required=\"required\"\n                />\n                <input\n                  type=\"submit\"\n                  id=\"btn_submit\"\n                  name=\"btn_submit\"\n                  value=\"Create\"\n                />\n              </form>\n            </div>\n          </div>\n\n          <!-- body -->\n          <div class=\"body\"><div class=\"menu collapse\"><ul>\n<li><a href=\"#8fce35b2-4059-4dd3-91b9-993c4d1a6b0c\">Welcome to Wiki.rs!</a></li>\n<li><a href=\"#e22558e9-b2d2-40b3-9b1f-ed6c702eee97\">特徴</a></li>\n<li><a href=\"#3f056b8c-6608-42e2-b4b9-0e62a525d674\">Development</a>\n<ul>\n<li><a href=\"#0f4dda9f-a1ed-435f-9ae3-bec219b72a33\">Prerequisties</a></li>\n<li><a href=\"#a136c2e2-abfc-4278-b5b2-568ed4c80468\">Run</a></li>\n</ul>\n</li>\n<li><a href=\"#4794fc2a-b860-439d-9f88-37454120e90c\">Design</a></li>\n<li><a href=\"#f260d1e2-71d0-483b-b307-0915a955a052\">API design</a>\n<ul>\n<li><a href=\"#e830c87c-2485-4ab4-9874-3d35c5f58d39\">Front</a></li>\n<li><a href=\"#48b97674-6a4a-457d-949d-93b9d66abb7a\">Backend API</a></li>\n<li><a href=\"#9d1422bc-30e9-4b43-a467-5bbd4d58fad5\">構成</a>\n<ul>\n<li><a href=\"#ea5848c0-d67b-4f5d-8da5-d862644d68cf\">client-side</a></li>\n<li><a href=\"#9b4eab84-8972-4ead-b74a-ccf95642c257\">server-side</a></li>\n</ul>\n</li>\n<li><a href=\"#3c3a0b72-76b9-404d-8a99-810d3e6bcff4\">TODOs</a></li>\n</ul>\n</li>\n<li><a href=\"#53efbdf4-d9f5-4760-a67e-5b3e0ba20fb3\">Site structure</a></li>\n</ul>\n</div>\n<h1 id=\"8fce35b2-4059-4dd3-91b9-993c4d1a6b0c\"><a href=\"/pages?path=top#8fce35b2-4059-4dd3-91b9-993c4d1a6b0c\" title=\"/pages?path=top#8fce35b2-4059-4dd3-91b9-993c4d1a6b0c\"></a>Welcome to Wiki.rs!</h1>\n<p>A simple wiki created with Rust from scratch.</p>\n<p><img src=\"/attach?path=top&amp;file=wiki-rs-demo.png\" alt=\"alt text\" /></p>\n<h1 id=\"e22558e9-b2d2-40b3-9b1f-ed6c702eee97\"><a href=\"/pages?path=top#e22558e9-b2d2-40b3-9b1f-ed6c702eee97\" title=\"/pages?path=top#e22558e9-b2d2-40b3-9b1f-ed6c702eee97\"></a>特徴</h1>\n<ul>\n<li>レスポンシブ対応</li>\n<li>ダークモード対応</li>\n<li>数式対応（<code>\\\\(\\\\)</code> で inline equation, <code>\\\\[\\\\]</code> で block）</li>\n<li>ソースコードのシンタックスハイライトが可能</li>\n<li>ソースコードのコピーができるボタンあり</li>\n<li>データベース不要で，rust 環境さえあればすぐに導入可能\n（DB は後から導入するかも知れない．要検討）</li>\n<li>コメントアウト対応（<code>//</code> でコメントアウトする）</li>\n</ul>\n<p>これから対応予定のもの</p>\n<ul>\n<li>ユーザごとのプライベートなページ</li>\n<li>github, youtube などの外部サイトとの連携\n<ul>\n<li>ソースコードや動画の埋め込み表示</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"3f056b8c-6608-42e2-b4b9-0e62a525d674\"><a href=\"/pages?path=top#3f056b8c-6608-42e2-b4b9-0e62a525d674\" title=\"/pages?path=top#3f056b8c-6608-42e2-b4b9-0e62a525d674\"></a>Development</h1>\n<h2 id=\"0f4dda9f-a1ed-435f-9ae3-bec219b72a33\"><a href=\"/pages?path=top#0f4dda9f-a1ed-435f-9ae3-bec219b72a33\" title=\"/pages?path=top#0f4dda9f-a1ed-435f-9ae3-bec219b72a33\"></a>Prerequisties</h2>\n<p>Install Cargo</p>\n<h2 id=\"a136c2e2-abfc-4278-b5b2-568ed4c80468\"><a href=\"/pages?path=top#a136c2e2-abfc-4278-b5b2-568ed4c80468\" title=\"/pages?path=top#a136c2e2-abfc-4278-b5b2-568ed4c80468\"></a>Run</h2>\n<ol>\n<li>\n<p>サンプルの public directory が docs 以下にあるので，それを持ってくる．</p>\n<pre><code class=\"language-sh\">cp -r docs/public .\n</code></pre>\n</li>\n<li>\n<p>cargo で backend を実行する</p>\n<pre><code class=\"language-sh\">cargo run\n</code></pre>\n</li>\n<li>\n<p>and access <a href=\"https://127.0.0.1:8443/\">https://127.0.0.1:8443/</a> on your browser.</p>\n</li>\n</ol>\n<h1 id=\"4794fc2a-b860-439d-9f88-37454120e90c\"><a href=\"/pages?path=top#4794fc2a-b860-439d-9f88-37454120e90c\" title=\"/pages?path=top#4794fc2a-b860-439d-9f88-37454120e90c\"></a>Design</h1>\n<p>とりあえずの architecture:</p>\n<ul>\n<li>model\n<ul>\n<li>page の型宣言をしておく</li>\n<li>markdown から page に変換したりするコードを置いておく</li>\n</ul>\n</li>\n<li>interface adapters :: controllers, presenters, gateways\n<ul>\n<li>ページの更新や取得などを行うコードを書いておく</li>\n</ul>\n</li>\n<li>frameworks and drivers :: web, ui, external interfaces, devices, db</li>\n</ul>\n<p>clean architecture:</p>\n<ul>\n<li>Enterprise business rules :: entities\n<ul>\n<li>page の型宣言をしておく</li>\n</ul>\n</li>\n<li>application business rules :: use cases, interactor\n<ul>\n<li>markdown から page に変換したりするコードを置いておく</li>\n</ul>\n</li>\n<li>interface adapters :: controllers, presenters, gateways\n<ul>\n<li>ページの更新や取得などを行うコードを書いておく</li>\n</ul>\n</li>\n<li>frameworks and drivers :: web, ui, external interfaces, devices, db</li>\n</ul>\n<h1 id=\"f260d1e2-71d0-483b-b307-0915a955a052\"><a href=\"/pages?path=top#f260d1e2-71d0-483b-b307-0915a955a052\" title=\"/pages?path=top#f260d1e2-71d0-483b-b307-0915a955a052\"></a>API design</h1>\n<h2 id=\"e830c87c-2485-4ab4-9874-3d35c5f58d39\"><a href=\"/pages?path=top#e830c87c-2485-4ab4-9874-3d35c5f58d39\" title=\"/pages?path=top#e830c87c-2485-4ab4-9874-3d35c5f58d39\"></a>Front</h2>\n<ul>\n<li>普通にアクセスして見る．</li>\n<li>今見ているページの markdown を編集して，それでページを更新する．\n<ul>\n<li>edit button</li>\n</ul>\n</li>\n<li>新しいページの markdown を編集して，それでページを更新する．\n<ul>\n<li>create button</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"48b97674-6a4a-457d-949d-93b9d66abb7a\"><a href=\"/pages?path=top#48b97674-6a4a-457d-949d-93b9d66abb7a\" title=\"/pages?path=top#48b97674-6a4a-457d-949d-93b9d66abb7a\"></a>Backend API</h2>\n<ul>\n<li>GET <code>/page?path=&lt;Path to the page&gt;</code>\n<ul>\n<li><code>&lt;Path to the page&gt;</code> にある html ページを返す</li>\n<li>サーバ上のファイルから読み込む</li>\n</ul>\n</li>\n<li>GET <code>/edit?path=&lt;Path to the page&gt;</code>\n<ul>\n<li>編集用の markdown を返す</li>\n<li>サーバ上のファイルから読み込む</li>\n</ul>\n</li>\n<li>POST <code>/edit {path:&quot;&lt;Path to the page&gt;&quot;, body: &quot;&lt;The updated markdown&gt;&quot;}</code>\n<ul>\n<li>markdown を投げ，それで <code>&lt;Path to the page&gt;</code> を更新する</li>\n<li>そのページがもともと存在しない場合は新しく作る．</li>\n<li>サーバ上のファイルに書き出しておく</li>\n</ul>\n</li>\n<li>DELETE <code>/edit?path=&lt;Path to the page&gt;</code>\n<ul>\n<li><code>&lt;Path to the page&gt;</code> を消去する</li>\n<li>サーバ上のファイルは消去する</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"9d1422bc-30e9-4b43-a467-5bbd4d58fad5\"><a href=\"/pages?path=top#9d1422bc-30e9-4b43-a467-5bbd4d58fad5\" title=\"/pages?path=top#9d1422bc-30e9-4b43-a467-5bbd4d58fad5\"></a>構成</h2>\n<h3 id=\"ea5848c0-d67b-4f5d-8da5-d862644d68cf\"><a href=\"/pages?path=top#ea5848c0-d67b-4f5d-8da5-d862644d68cf\" title=\"/pages?path=top#ea5848c0-d67b-4f5d-8da5-d862644d68cf\"></a>client-side</h3>\n<pre><code class=\"language-sh\">public/\n├── assets/ # some assets files\n│   ├── dracula.css\n│   └── main.css\n├── edit/ # directory to save markdown files\n├── index.html # the root index.html file\n├── layouts/ # some template html files\n│   ├── edit.html\n│   └── page.html\n└── pages/ # directory to save the transformed html files\n</code></pre>\n<p>現在，\n<code>public/pages/*</code>, <code>public/edit/*</code> は廃止して，\n<code>public/db/*</code> に json ファイルを置くことにしている．</p>\n<ul>\n<li>TODO: 後で上記のファイル構成の方にも反映する．</li>\n</ul>\n<h3 id=\"9b4eab84-8972-4ead-b74a-ccf95642c257\"><a href=\"/pages?path=top#9b4eab84-8972-4ead-b74a-ccf95642c257\" title=\"/pages?path=top#9b4eab84-8972-4ead-b74a-ccf95642c257\"></a>server-side</h3>\n<p>clean architecture を参考にしようともがいている\n（けどそもそも理解できていない）．</p>\n<ul>\n<li>（けどそもそも理解できていない．．．</li>\n</ul>\n<p>参考資料：</p>\n<ul>\n<li><a href=\"https://qiita.com/nrslib/items/a5f902c4defc83bd46b8#%E7%9F%A2%E5%8D%B0%E3%81%AE%E6%96%B9%E5%90%91\" title=\"https://qiita.com/nrslib/items/a5f902c4defc83bd46b8#%E7%9F%A2%E5%8D%B0%E3%81%AE%E6%96%B9%E5%90%91\">https://qiita.com/nrslib/items/a5f902c4defc83bd46b8#%E7%9F%A2%E5%8D%B0%E3%81%AE%E6%96%B9%E5%90%91</a></li>\n<li><a href=\"https://nrslib.com/clean-architecture-with-java/#outline__6_3\" title=\"https://nrslib.com/clean-architecture-with-java/#outline__6_3\">https://nrslib.com/clean-architecture-with-java/#outline__6_3</a></li>\n<li><a href=\"https://gist.github.com/mpppk/609d592f25cab9312654b39f1b357c60\" title=\"https://gist.github.com/mpppk/609d592f25cab9312654b39f1b357c60\">https://gist.github.com/mpppk/609d592f25cab9312654b39f1b357c60</a></li>\n<li><a href=\"https://nrslib.com/clean-architecture-with-java/#outline__6_3\" title=\"https://nrslib.com/clean-architecture-with-java/#outline__6_3\">https://nrslib.com/clean-architecture-with-java/#outline__6_3</a></li>\n</ul>\n<pre><code class=\"language-sh\">src\n├── controllers/ # client と通信する POST API\n│   ├── handle_page.rs\n│   ├── index.rs\n│   └── mod.rs\n├── entities/ # markdown to html converter などの補助関数とか\n│   ├── mod.rs\n│   └── pages.rs\n├── gateways # データベースもどき\n│   ├── mod.rs\n│   └── pages.rs\n├── lib.rs\n├── main.rs\n├── routes.rs\n├── usecases # ページのデータ構造の定義とか\n│   ├── mod.rs\n│   └── pages.rs\n└── util.rs\n</code></pre>\n<h2 id=\"3c3a0b72-76b9-404d-8a99-810d3e6bcff4\"><a href=\"/pages?path=top#3c3a0b72-76b9-404d-8a99-810d3e6bcff4\" title=\"/pages?path=top#3c3a0b72-76b9-404d-8a99-810d3e6bcff4\"></a>TODOs</h2>\n<ul>\n<li><input disabled=\"\" type=\"checkbox\"/>\nclean architecture などをもとにアーキテクチャを再考する．</li>\n<li><input disabled=\"\" type=\"checkbox\"/>\nissue に挙げたものの解決</li>\n</ul>\n<h1 id=\"53efbdf4-d9f5-4760-a67e-5b3e0ba20fb3\"><a href=\"/pages?path=top#53efbdf4-d9f5-4760-a67e-5b3e0ba20fb3\" title=\"/pages?path=top#53efbdf4-d9f5-4760-a67e-5b3e0ba20fb3\"></a>Site structure</h1>\n<p>{{ INDEX_UL }}</p>\n</div>\n        </div>\n      </div>\n\n      <!-- links to pages -->\n      <!--\n        <div class=\"site-structure\">\n            {{ INDEX_UL }}\n        </div>\n        -->\n\n      <!-- footer -->\n      <div class=\"site-footer\">\n        <div class=\"attach-names\">{{ ATTACH_NAMES }}</div>\n      </div>\n\n      <!-- button to go top -->\n      <button id=\"go-up-button\" onclick=\"gotop()\">▲</button>\n    </div>\n  </body>\n\n  <script>\n    const __path__ = \"top\";\n  </script>\n  <script src=\"/files/js/page.js\"></script>\n  <script src=\"/files/js/top.js\"></script>\n</html>\n","modified_rfc3339":"2022-05-15T08:43:23.500735+00:00"}